# 2.2 Память, управление памятью

### Задание 1

Что происходит с оперативной памятью во время перехода ПК в:
1) сон (suspend)
2) гибернацию (hibernate)

*Приведите ответ для каждого случая в свободной форме.*

#### *Ответ:*
*1) Сон (Suspend). В режиме сна на оперативную память продолжает поступать питание. Содержимое оперативной памяти полностью сохраняется.*

*2) Гибернация (Hibernate). Данные из оперативной памяти сохраняются на диск и питание прекращает поступать.*

---

### Задание 2

В лекции не была упомянута одна известная команда для получения информации о нагрузке на компьютер и в частности  на ОЗУ.

Ее вывод выглядит примерно вот так:

<a href="https://imgbb.com/"><img src="https://i.ibb.co/7Q16Chb/2020-12-07-16-52-37.png" alt="2020-12-07-16-52-37" border="0"></a>

*Как называется эта команда? Что такое si и so  в примере на картинке? *

*Приведите ответ в свободной форме.*

#### *Ответ:*
*Команда называется `vmstat` (virtual memory statistics).*

*`si` (swap-in) - перемещение данных из области подкачки в основную память.*

*`so` (swap-out) - перемещение данных основной памяти на диск подкачки.*


---

### Задание 3

Приведите 3 команды, которые выведут на экран следующее:

1) Архитектуру ПК
2) Модель процессора
3) Количество памяти, которая уже не используется процессами, но еще остается в памяти(ключевое слово - inactive).

*Примечание: при выполнении задания предполагается использование конструкции "{команда} | grep {параметр для фильрации вывода}"*

#### *Ответ:*
1) Архитектура ПК
```Bash
lscpu | grep -i architecture
```
2) Модель процессора
```Bash
lscpu | grep -i name
```
3) Количество памяти, которая уже не используется процессами, но еще остается в памяти(ключевое слово - inactive).
```Bash
vmstat -s | grep -i inactive
```

---

### Задание 4

1) Создайте скрин вывода команды `free -h -t`
2) Создайте swap-файл размером 1Гб
3) Добавьте настройку чтобы swap-файл подключался автоматически при перезагрузке виртуальной машины (подсказка: необходимо внести изменения в файл `/etc/fstab`)
4) Создайте скрин вывода команды `free -h -t`
5) Создайте скрин вывода команды `swapon -s`
6) Измените процент свободной оперативной памяти, при котором начинает использоваться раздел подкачки до 30%. Сделайте скрин внесенного изменения.

*В качестве ответа приложите созданные скриншоты*

#### *Ответ:*
1) Создайте скрин вывода команды `free -h -t`
![Задание 4.1](https://github.com/tverdyakov/portfolio-tverdyakov/blob/main/Experience%2C%20skills%20and%20abilities/Netology/02.%20Операционная%20система%20Linux/02.%20Память%2C%20управление%20памятью/04.1.png)
2) Создайте swap-файл размером 1Гб
```Bash
sudo fallocate -l 1G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```
![Задание 4.2](https://github.com/tverdyakov/portfolio-tverdyakov/blob/main/Experience%2C%20skills%20and%20abilities/Netology/02.%20Операционная%20система%20Linux/02.%20Память%2C%20управление%20памятью/04.2.png)
3) Добавьте настройку чтобы swap-файл подключался автоматически при перезагрузке виртуальной машины (подсказка: необходимо внести изменения в файл `/etc/fstab`)
```Bash
sudo nano /etc/fstab
```
![Задание 4.3](https://github.com/tverdyakov/portfolio-tverdyakov/blob/main/Experience%2C%20skills%20and%20abilities/Netology/02.%20Операционная%20система%20Linux/02.%20Память%2C%20управление%20памятью/04.3.png)
4) Создайте скрин вывода команды `free -h -t`
![Задание 4.4](https://github.com/tverdyakov/portfolio-tverdyakov/blob/main/Experience%2C%20skills%20and%20abilities/Netology/02.%20Операционная%20система%20Linux/02.%20Память%2C%20управление%20памятью/04.4.png)
5) Создайте скрин вывода команды `swapon -s`
![Задание 4.5](https://github.com/tverdyakov/portfolio-tverdyakov/blob/main/Experience%2C%20skills%20and%20abilities/Netology/02.%20Операционная%20система%20Linux/02.%20Память%2C%20управление%20памятью/04.5.png)
6) Измените процент свободной оперативной памяти, при котором начинает использоваться раздел подкачки до 30%. Сделайте скрин внесенного изменения.
```Bash
sudo sysctl vm.swappiness=30
cat /proc/sys/vm/swappiness
```
![Задание 4.6](https://github.com/tverdyakov/portfolio-tverdyakov/blob/main/Experience%2C%20skills%20and%20abilities/Netology/02.%20Операционная%20система%20Linux/02.%20Память%2C%20управление%20памятью/04.6.png)

---

### Задание 5*

Найдите информацию про tmpfs.

*Расскажите в свободной форме, в каких случаях уместно использовать эту технологию.*

Создайте диск `tmpfs` (размер выберите исходя из объёма ОЗУ на ПК: 512Мб-1Гб), смонтируйте его в директорию `/mytmpfs`.

*В качестве ответа приведите скрин вывода команды df- h до и после монтирования диска tmpfs.*

#### *Ответ:* 
*`tmpfs` — это файловая система, располагающаяся в оперативной памяти. Так как главное преимущество – скорость, то уместно использовать для быстрого доступа к файлам, операции записи - чтения происходят быстро. Плюс можно использовать, при необходимости, для автоматического удаления файлов при перезагрузке.*
```Bash
df -h
sudo mkdir /mytmpfs
sudo mount -t tmpfs tmpds /mytmpfs -o size=123m
df -h
```
![Задание 4.6](https://github.com/tverdyakov/portfolio-tverdyakov/blob/main/Experience%2C%20skills%20and%20abilities/Netology/02.%20Операционная%20система%20Linux/02.%20Память%2C%20управление%20памятью/05.png)

---
